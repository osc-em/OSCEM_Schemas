@prefix instrument: <https://w3id.org/oscem-schemas/latest/instrument> .
@prefix linkml: <https://w3id.org/linkml/> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix types: <https://w3id.org/oscem-schemas/latest/custom_types> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

types:BoundingBox2D a sh:NodeShape ;
    sh:closed true ;
    sh:description "an axis-aligned 2D bounding box (float units)" ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class types:QuantitySI ;
            sh:description "maximum y" ;
            sh:maxCount 1 ;
            sh:nodeKind sh:BlankNodeOrIRI ;
            sh:order 3 ;
            sh:path types:y_max ],
        [ sh:class types:QuantitySI ;
            sh:description "minimum y" ;
            sh:maxCount 1 ;
            sh:nodeKind sh:BlankNodeOrIRI ;
            sh:order 2 ;
            sh:path types:y_min ],
        [ sh:class types:QuantitySI ;
            sh:description "maximum x" ;
            sh:maxCount 1 ;
            sh:nodeKind sh:BlankNodeOrIRI ;
            sh:order 1 ;
            sh:path types:x_max ],
        [ sh:class types:QuantitySI ;
            sh:description "minimum x" ;
            sh:maxCount 1 ;
            sh:nodeKind sh:BlankNodeOrIRI ;
            sh:order 0 ;
            sh:path types:x_min ] ;
    sh:targetClass types:BoundingBox2D .

types:Descriptor a sh:NodeShape ;
    sh:closed false ;
    sh:description "List of custom descriptors for user-defined key-value pairs describing how micrographs were obtained or any related information" ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class linkml:Any ;
            sh:description "Description of the descriptor" ;
            sh:maxCount 1 ;
            sh:nodeKind sh:BlankNodeOrIRI ;
            sh:order 1 ;
            sh:path types:descriptor_thing ],
        [ sh:datatype xsd:string ;
            sh:description "Name defining the descriptor" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 0 ;
            sh:path types:descriptor_name ] ;
    sh:targetClass types:Descriptor .

types:Descriptors a sh:NodeShape ;
    sh:closed true ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:string ;
            sh:description "Name defining the descriptor" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 0 ;
            sh:path types:descriptor_name ],
        [ sh:class linkml:Any ;
            sh:description "Description of the descriptor" ;
            sh:maxCount 1 ;
            sh:nodeKind sh:BlankNodeOrIRI ;
            sh:order 1 ;
            sh:path types:descriptor_thing ] ;
    sh:targetClass types:Descriptors .

types:ImageSize a sh:NodeShape ;
    sh:closed true ;
    sh:description "size of a 2D image (in integer units)" ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:integer ;
            sh:description "The height of a given item - unit depends on item" ;
            sh:maxCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 0 ;
            sh:path types:height ],
        [ sh:datatype xsd:integer ;
            sh:description "The width of a given item - unit depends on item" ;
            sh:maxCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 1 ;
            sh:path types:width ] ;
    sh:targetClass types:ImageSize .

types:Range a sh:NodeShape ;
    sh:closed true ;
    sh:description "A range constructed from min and max" ;
    sh:ignoredProperties ( types:increment rdf:type ) ;
    sh:property [ sh:class types:QuantitySI ;
            sh:description "Minimal value of a given dataset property" ;
            sh:maxCount 1 ;
            sh:nodeKind sh:BlankNodeOrIRI ;
            sh:order 0 ;
            sh:path types:minimal ],
        [ sh:class types:QuantitySI ;
            sh:description "Maximal value of a given dataset property" ;
            sh:maxCount 1 ;
            sh:nodeKind sh:BlankNodeOrIRI ;
            sh:order 1 ;
            sh:path types:maximal ] ;
    sh:targetClass types:Range .

types:Series a sh:NodeShape ;
    sh:closed true ;
    sh:description "A series of numbers constructed from min, max, and increment" ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class types:QuantitySI ;
            sh:description "Increment between elements of a series" ;
            sh:maxCount 1 ;
            sh:nodeKind sh:BlankNodeOrIRI ;
            sh:order 0 ;
            sh:path types:increment ],
        [ sh:class types:QuantitySI ;
            sh:description "Maximal value of a given dataset property" ;
            sh:maxCount 1 ;
            sh:nodeKind sh:BlankNodeOrIRI ;
            sh:order 2 ;
            sh:path types:maximal ],
        [ sh:class types:QuantitySI ;
            sh:description "Minimal value of a given dataset property" ;
            sh:maxCount 1 ;
            sh:nodeKind sh:BlankNodeOrIRI ;
            sh:order 1 ;
            sh:path types:minimal ] ;
    sh:targetClass types:Series .

instrument:Instrument a sh:NodeShape ;
    sh:closed true ;
    sh:description "Instrument values, mostly constant across a data collection." ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class <http://schema.org/Microscope> ;
            sh:description "Microscope information" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:nodeKind sh:BlankNodeOrIRI ;
            sh:order 0 ;
            sh:path instrument:microscope ],
        [ sh:class types:QuantitySI ;
            sh:description "Refers to how tightly or widely the electron beam is focused onto the sample, in mrad. Typically low convergence for TEM and high for STEM." ;
            sh:maxCount 1 ;
            sh:nodeKind sh:BlankNodeOrIRI ;
            sh:order 8 ;
            sh:path instrument:beam_convergence ],
        [ sh:class types:QuantitySI ;
            sh:description "C2 aperture size used in data acquisition, in Âµm" ;
            sh:maxCount 1 ;
            sh:nodeKind sh:BlankNodeOrIRI ;
            sh:order 5 ;
            sh:path instrument:c2_aperture ],
        [ sh:datatype xsd:string ;
            sh:description "Mode of imaging used during data collection" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 2 ;
            sh:path instrument:imaging ],
        [ sh:class types:QuantitySI ;
            sh:description "Voltage used for the electron acceleration, in kV" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:nodeKind sh:BlankNodeOrIRI ;
            sh:order 4 ;
            sh:path instrument:acceleration_voltage ],
        [ sh:datatype xsd:string ;
            sh:description "Type of electron source used in the microscope, such as FEG" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 3 ;
            sh:path instrument:electron_source ],
        [ sh:datatype xsd:string ;
            sh:description "Mode of illumination used during data collection" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 1 ;
            sh:path instrument:illumination ],
        [ sh:class types:QuantitySI ;
            sh:description "Spherical aberration of the instrument, in mm" ;
            sh:maxCount 1 ;
            sh:nodeKind sh:BlankNodeOrIRI ;
            sh:order 6 ;
            sh:path instrument:cs ],
        [ sh:datatype xsd:string ;
            sh:description "Operating mode of the microscope, i.e. \"TEM\", \"STEM\"" ;
            sh:maxCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 7 ;
            sh:path instrument:operating_mode ] ;
    sh:targetClass instrument:Instrument .

<qudt:quantityValue> a sh:NodeShape ;
    sh:closed true ;
    sh:description "if a value has a unit, it should be given as a unit value pair." ;
    sh:ignoredProperties ( types:valueSI rdf:type types:unitSI ) ;
    sh:property [ sh:datatype xsd:float ;
            sh:description "the value of a field with a unit" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 1 ;
            sh:path <qudt:hasQuantityKind> ],
        [ sh:datatype xsd:string ;
            sh:description "the unit of a given value" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 0 ;
            sh:path <qudt:hasUnit> ] ;
    sh:targetClass <qudt:quantityValue> .

<http://schema.org/Microscope> a sh:NodeShape ;
    sh:closed true ;
    sh:description "Microscope information" ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:string ;
            sh:description "The name of the manufacturer" ;
            sh:maxCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 1 ;
            sh:path types:manufacturer ],
        [ sh:datatype xsd:string ;
            sh:description "The model of the item" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 0 ;
            sh:path types:model ] ;
    sh:targetClass <http://schema.org/Microscope> .

linkml:Any a sh:NodeShape ;
    sh:closed true ;
    sh:description "Any type, used as the base for type-narrowing." ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:targetClass linkml:Any .

types:QuantitySI a sh:NodeShape ;
    sh:closed true ;
    sh:description "unit value extended to have two additional fields si_value and si_unit" ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:float ;
            sh:description "value of a given field in respect to its SI unit" ;
            sh:maxCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 0 ;
            sh:path types:valueSI ],
        [ sh:datatype xsd:string ;
            sh:description "the unit of a given value" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 2 ;
            sh:path <qudt:hasUnit> ],
        [ sh:datatype xsd:string ;
            sh:description "the SI unit attached to a si value" ;
            sh:maxCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 1 ;
            sh:path types:unitSI ],
        [ sh:datatype xsd:float ;
            sh:description "the value of a field with a unit" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 3 ;
            sh:path <qudt:hasQuantityKind> ] ;
    sh:targetClass types:QuantitySI .

