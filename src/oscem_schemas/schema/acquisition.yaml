---
id: https://w3id.org/osc-em/acquisition
name: OSCEMAcquisiton
description: >
  LinkML schema for electron microscopy sample and author-related metadata,
  broadly following the EMDB standard with some additions.
prefixes:
  linkml: https://w3id.org/linkml/
  ex: http://example.org/

default_prefix: ex

imports:
  - linkml:types
  - ./tomography

classes:
  Base:
    slots:
    - acquisition
  Acquisition:
    slots:
    - nominal_defocus
    - calibrated_defocus
    - nominal_magnification
    - calibrated_magnification
    - holder
    - holder_cryogen
    - temperature
    - microscope_software
    - detector
    - detector_mode
    - dose_per_movie
    - energy_filter
    - image_size
    - datetime
    - exposure_time
    - cryogen
    - frames_per_movie
    - grids_imaged
    - images_generated
    - binning_camera
    - pixel_size
    - specialist_optics
    - beamshift
    - beamtilt
    - imageshift
    - beamtiltgroups
    - gainref_flip_rotate
    slot_usage:
      detector:
        required: true
      dose_per_movie:
        required: true
      datetime:
        required: true
      binning_camera:
        required: true
      pixel_size:
        required: true


  NominalDefocus:
    slots:
    - minimal
    - maximal
  CalibratedDefocus:
    slots:
    - minimal
    - maximal
  TemperatureRange:
    slots:
    - minimal
    - maximal
  EnergyFilter:
    slots:
    - used
    - model
    - width
    slot_usage:
      used:
        required: true
      width:
        required: true
  ImageSize:
    slots:
    - height
    - width
  SpecialistOptics:
    slots:
    - phaseplate
    - spherical_aberration_corrector
    - chromatic_aberration_corrector
  Phaseplate:
    slots:
    - used
    - type
    slot_usage:
      used:
        required: true
      type:
        required: true
  SphericalAberrationCorrector:
    slots:
    - used
    - type
    slot_usage:
      used:
        required: true
      type:
        required: true
  ChromaticAberrationCorrector:
    slots:
    - used
    - type
    slot_usage:
      used:
        required: true
      type:
        required: true
  Beamshift:
    slots:
    - x_min
    - x_max
    - y_min
    - y_max
  Beamtilt:
    slots:
    - x_min
    - x_max
    - y_min
    - y_max
  Imageshift:
    slots:
    - x_min
    - x_max
    - y_min
    - y_max

slots:
  acquisition:
    range: Acquisition
  nominal_defocus:
    range: NominalDefocus
    description: Target defocus set, min and max values in µm.
  minimal:
    description: Minimal value of a given dataset property
    range: float
  maximal:
    description: Maximal value of a given dataset property
    range: float
  calibrated_defocus:
    range: CalibratedDefocus
    description: Machine estimated defocus, min and max values in µm. Has a tendency to be off.
  nominal_magnification:
    description: Magnification level as indicated by the instrument, no unit
    range: integer
  calibrated_magnification:
    description: Calculated magnification, no unit
    range: integer
  holder:
    description: Speciman holder model
    range: string
  holder_cryogen:
    description: Type of cryogen used in the holder - if the holder is cooled seperately
    range: string
  temperature:
    range: TemperatureRange
    description: Temperature during data collection, in K with min and max values.
  microscope_software:
    description: Software used for instrument control,
    range: string
  detector:
    description: Make and model of the detector used
    range: string
  detector_mode:
    description: Operating mode of the detector
    range: string
  dose_per_movie:
    description: Average dose per image/movie/tilt - given in electrons per square Angstrom
    range: float
  energy_filter:
    range: EnergyFilter
    description: Wether an energy filter was used and its specifics.
  used:
    description: whether a specific instrument was used during data acquisition
    range: boolean
  model:
    description: Make and model of a specilized device
    range: string
  width:
    description: The width of a given item - unit depends on item
    range: integer
  height:
    description: The height of a given item - unit depends on item
    range: integer
  image_size:
    range: ImageSize
    description: The size of the image in pixels, height and width given.
  datetime:
    description: Time and date of the data acquisition
    range: datetime
  exposure_time:
    description: Time of data acquisition per movie/tilt - in s
    range: float
  cryogen:
    description: Cryogen used in cooling the instrument and sample, usually nitrogen
    range: string
  frames_per_movie:
    description: Number of frames that on average constitute a full movie, can be a bit hard to define for some detectors
    range: integer
  grids_imaged:
    description: Number of grids imaged for this project - here with qualifier during this data acquisition
    range: integer
  images_generated:
    description: Number of images generated total for this data collection - might need a qualifier for tilt series to determine whether full series or individual tilts are counted
    range: integer
  binning_camera:
    description: Level of binning on the images applied during data collection
    range: float
  pixel_size:
    description: Pixel size, in Angstrom
    range: float
  specialist_optics:
    description: Any type of special optics, such as a phaseplate
    range: SpecialistOptics
  phaseplate:
    description: Phaseplate is a special optics device that can be used to enhance contrast
    range: Phaseplate
  type:
    description: Details of a given specialist instrument
    range: string
  spherical_aberration_corrector:
    range: SphericalAberrationCorrector
    description: Specialist device to correct for spherical aberration of the microscope lenses
  chromatic_aberration_corrector:
    range: ChromaticAberrationCorrector
    description: Specialist device to correct for chromatic aberration of the microscope lenses
  beamshift:
    range: Beamshift
    description: Movement of the beam above the sample for data collection purposes that does not require movement of the stage. Given in mrad.
  x_min:
    range: float
  x_max:
    range: float
  y_min:
    range: float
  y_max:
    range: float
  beamtilt:
    range: Beamtilt
    description: Another way to move the beam above the sample for data collection purposes that does not require movement of the stage. Given in mrad.
  imageshift:
    range: Imageshift
    description: Movement of the Beam below the image in order to shift the image on the detector. Given in µm.
  beamtiltgroups:
    range: integer
    description: Number of Beamtilt groups present in this dataset - for optimized processing split dataset into groups of same tilt angle. Despite its name Beamshift is often used to achive this result.
  gainref_flip_rotate:
    range: string
    description: Whether and how you have to flip or rotate the gainref in order to align with your acquired images
